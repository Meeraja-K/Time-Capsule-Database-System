{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/newhome/timeCapsulePage/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\"; // Import useRouter\r\nimport \"./page.css\";\r\n\r\nconst TimeCapsulePage: React.FC = () => {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter(); // Initialize the router\r\n  const capsuleName = searchParams?.get(\"capsuleName\");\r\n\r\n  const [releaseDate, setReleaseDate] = useState(\"\");\r\n  const [releaseTime, setReleaseTime] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [sharedWith, setSharedWith] = useState<string[]>([]);\r\n  const [username, setUsername] = useState<string | null>(null);\r\n  const [capsuleContents, setCapsuleContents] = useState<any[]>([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [showContents, setShowContents] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Retrieve the logged-in user's username from localStorage\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    const storedUsername = storedUser ? JSON.parse(storedUser).username : null;\r\n    setUsername(storedUsername);\r\n\r\n    if (!capsuleName) return;\r\n\r\n    // Fetch the time capsule details\r\n    const fetchCapsuleDetails = async () => {\r\n      try {\r\n        const response = await fetch(`/api/capsuleInfo?capsuleName=${capsuleName}`);\r\n        const capsule = await response.json();\r\n\r\n        if (capsule.message) {\r\n          setError(capsule.message);\r\n        } else {\r\n          setReleaseDate(capsule.release_date || \"\");\r\n          setReleaseTime(capsule.release_time || \"\");\r\n          setStatus(capsule.status || \"\");\r\n          setSharedWith(capsule.sharedWith || []);\r\n        }\r\n      } catch (err) {\r\n        setError(\"Error fetching capsule details\");\r\n      }\r\n    };\r\n\r\n    fetchCapsuleDetails();\r\n  }, [capsuleName]);\r\n\r\n  const openCapsule = async () => {\r\n    if (status !== \"delivered\") {\r\n      setError(\"This capsule has not been delivered yet.\");\r\n      return;\r\n    }\r\n\r\n    if (!sharedWith.includes(username || \"\")) {\r\n      setError(\"This capsule is not shared with you.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Fetch capsule contents\r\n      const response = await fetch(`/api/capsuleContents?capsuleName=${capsuleName}`);\r\n      const contents = await response.json();\r\n\r\n      if (contents.message) {\r\n        setError(contents.message);\r\n      } else {\r\n        setCapsuleContents(contents);\r\n        setShowContents(true); // Show the popup dialog\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error fetching capsule contents.\");\r\n    }\r\n  };\r\n\r\n  const closeDialog = () => {\r\n    setShowContents(false);\r\n  };\r\n\r\n  const navigateToDashboard = () => {\r\n    router.push(\"/newhome/dashboardPage\"); // Navigate to the dashboard page\r\n  };\r\n\r\n  return (\r\n    <div className=\"timecapsule-container\">\r\n      <main className=\"timecapsule-main\">\r\n        <h1>{capsuleName || \"Time Capsule\"}</h1>\r\n        <div className=\"capsule-content\">\r\n          <img src={`/assets/capsule.png`} alt=\"Capsule\" className=\"capsule-image\" />\r\n          <p>Status: <strong>{status || \"Loading...\"}</strong></p>\r\n          <p>Release Date: <strong>{releaseDate || \"Loading...\"}</strong></p>\r\n          <p>Release Time: <strong>{releaseTime || \"Loading...\"}</strong></p>\r\n          <p>Shared With: <strong>{sharedWith.join(\", \") || \"No users\"}</strong></p>\r\n          {error && <p className=\"error-text\">{error}</p>}\r\n\r\n          <button className=\"open-button\" onClick={openCapsule}>Open Capsule</button>\r\n          <button className=\"back-button\" onClick={navigateToDashboard}>Back</button>\r\n        </div>\r\n\r\n        {/* Capsule Contents Popup */}\r\n        {showContents && (\r\n          <div className=\"dialog-box\">\r\n            <div className=\"dialog-content\">\r\n              <h2>Capsule Content</h2>\r\n              {capsuleContents.map((content, index) => (\r\n                <div key={index}>\r\n                  {content.content_type === \"text\" ? (\r\n                    <p>{content.content_data}</p>\r\n                  ) : (\r\n                    <img src={`data:image/png;base64,${content.content_data}`} alt=\"Capsule Content\" />\r\n                  )}\r\n                </div>\r\n              ))}\r\n              <button onClick={closeDialog}>Close</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimeCapsulePage;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}